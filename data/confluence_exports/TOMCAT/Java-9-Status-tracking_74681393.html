<!DOCTYPE html>
<html>
    <head>
        <title>Apache Tomcat : Java 9 Status tracking</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Apache Tomcat</a></span>
                            </li>
                                                    <li>
                                <span><a href="Apache-Tomcat-Home_61320756.html">Apache Tomcat Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Design-and-Development-Issues_61320762.html">Design and Development Issues</a></span>
                            </li>
                                                    <li>
                                <span><a href="Archive_110694813.html">Archive</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Apache Tomcat : Java 9 Status tracking
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Mark Thomas</span>, last modified on окт 02, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>------------------------------------------------------------------------ <br/>r1720196 | markt | 2015-12-15 18:05:45 +0100 (Tue, 15 Dec 2015) | 1 line <br/>Minor hack to get the unit tests passing on Java 9.</p><p><em> JarScanner requires more careful review in light of Java 9 modules.</em><br/>------------------------------------------------------------------------ <br/>r1692896 | markt | 2015-07-27 17:18:49 +0200 (Mon, 27 Jul 2015) | 1 line <br/>Add Java 9 support for JSPs</p><p><em>Back-ported for 8.5.x and 8.0.x. Can't back-port for 7.0.x as ECJ that supports Java 9 doesn't run on Java 6. Need to decide how to handle this.</em></p><p><span style="font-size: 24.0px;"><br/></span></p><p><span style="font-size: 24.0px;">Resolved</span></p><p>r1809434 | rjung | 2017-09-23 16:45:48 +0200 (Sat, 23 Sep 2017) | 3 lines <br/>Use the correct path when loading the JVMlogging.properties file for Java 9. </p><p><em>Already back-ported.</em></p><p>------------------------------------------------------------------------ <br/>r1806973 | markt | 2017-09-01 17:04:45 +0200 (Fri, 01 Sep 2017) | 1 line <br/>Java 9 allows us to be more selective with the JRE memory leak protection. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1806932 | markt | 2017-09-01 13:10:37 +0200 (Fri, 01 Sep 2017) | 1 line <br/>Update comment. We now have features that depend on Java 9.</p><p><em>Only applied to trunk.</em></p><p>------------------------------------------------------------------------ <br/>r1800617 | markt | 2017-07-03 12:19:46 +0200 (Mon, 03 Jul 2017) | 1 line <br/>Add necessary Java 9 configuration options to the startup scripts to prevent <br/>warnings being generated on web application stop. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1800614 | markt | 2017-07-03 11:48:01 +0200 (Mon, 03 Jul 2017) | 1 line <br/>Restore the local definition of the web service annotations since the JRE <br/>provided versions are deprecated and Java 9 does not provide them by default. </p><p>Not back-ported as this change reverted a previous change.</p><p>------------------------------------------------------------------------ <br/>*r1791050 | markt | 2017-04-12 00:36:01 +0200 (Wed, 12 Apr 2017) | 1 line <br/>Refactoring in preparation for Java 9. Refactor to avoid using some methods <br/>that will be deprecated in Java 9 onwards. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1791028 | markt | 2017-04-11 23:16:04 +0200 (Tue, 11 Apr 2017) | 1 line <br/>Refactoring in preparation for Java 9. Refactor to avoid using some methods <br/>that will be deprecated in Java 9 onwards. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1791027 | markt | 2017-04-11 22:40:36 +0200 (Tue, 11 Apr 2017) | 1 line <br/>Refactoring in preparation for Java 9. Refactor to avoid using some methods <br/>that will be deprecated in Java 9 onwards. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1791036 | markt | 2017-04-11 23:40:13 +0200 (Tue, 11 Apr 2017) | 1 line <br/>Java 8 and Java 9 friendly alternative</p><p><em>Back-ported to 8.5.x but no further as encoding detector has not been back-ported further.</em><br/>------------------------------------------------------------------------ <br/>r1791032 | markt | 2017-04-11 23:34:50 +0200 (Tue, 11 Apr 2017) | 1 line <br/>Revert the Java 9 change that breaks in Java 8 </p><p><em>Back-ported to 8.5.x but no further as encoding detector has not been back-ported further.</em></p><p>------------------------------------------------------------------------ <br/>*r1782857 | markt | 2017-02-13 21:39:14 +0100 (Mon, 13 Feb 2017) | 3 lines <br/>Java 9 support for annotation scanningBased <br/>on:<a class="external-link" href="http://cr.openjdk.java.net/~mr/jigsaw/spec/lang-vm.html#jigsaw-2.6" rel="nofollow">http://cr.openjdk.java.net/~mr/jigsaw/spec/lang-vm.html#jigsaw-2.6</a> </p><p>------------------------------------------------------------------------ </p><p>r1779545 | markt | 2017-01-20 01:12:16 +0100 (Fri, 20 Jan 2017) | 2 lines <br/>Adding ALPN support for JSSE with Java 9Enable ALPN and also, therefore, <br/>HTTP/2 for the NIO and NIO2 HTTP connectors when using the JSSE implementation <br/>for TLS when running on Java 9. </p><p><em>Back-ported to 8.5.x but not further since 8.0.x and earlier do not support/require ALPN.</em></p><div>------------------------------------------------------------------------ </div><p>r1779313 | markt | 2017-01-18 12:23:17 +0100 (Wed, 18 Jan 2017) | 1 line <br/>ws police (I need to configure my Java 9 dev environment correctly) </p><p><em>Related to ALPN and handled as part of those back-ports.</em></p><p>------------------------------------------------------------------------ <br/>r1778603 | markt | 2017-01-13 15:42:01 +0100 (Fri, 13 Jan 2017) | 2 lines <br/>Adding ALPN support for JSSE with Java 9Add some plumbing to exposed the client <br/>requested application protocols to the method that configures the SSLEngine </p><p><em>Back-ported to 8.5.x but not further since 8.0.x and earlier do not support/require ALPN.</em></p><p>------------------------------------------------------------------------ <br/>r1778575 | markt | 2017-01-13 13:50:01 +0100 (Fri, 13 Jan 2017) | 2 lines <br/>Adding ALPN support for JSSE with Java 9Expand the data extracted from the TLS <br/>client hello to include the client requested ALPN names. </p><p><em>Back-ported to 8.5.x but not further since 8.0.x and earlier do not support/require ALPN.</em></p><p>------------------------------------------------------------------------ <br/>*r1766822 | markt | 2016-10-27 15:59:41 +0200 (Thu, 27 Oct 2016) | 2 lines <br/>ThreadLocal leak detection is now hitting Java 9 module issues. <br/>Catch the error and provide a useful error message if this happens. </p><p><em>Back-ports complete.</em></p><p>------------------------------------------------------------------------ <br/>r1779932 | markt | 2017-01-23 15:16:32 +0100 (Mon, 23 Jan 2017) | 2 lines <br/>Remove unused code, effectively reverting 1779370 and 1779612. <br/>Java 9 is now handled in other branch of if/else. </p><p><em>Back-ported to 8.5.x but no further as cleaner has not been back-ported further.</em></p><div>------------------------------------------------------------------------ </div><p>r1779622 | remm | 2017-01-20 14:09:56 +0100 (Fri, 20 Jan 2017) | 1 line <br/>Restore Java 9 direct byte buffer cleanup code, for now. The last way to <br/>access it is through the private Unsafe singleton, which will likely stop <br/>working at some point <span class="moz-smiley-s2" title=":("> </span> </p><p><em>Back-ported to 8.5.x but no further as cleaner has not been back-ported further.</em></p><div>------------------------------------------------------------------------ </div><p>r1779612 | markt | 2017-01-20 12:58:51 +0100 (Fri, 20 Jan 2017) | 1 line <br/>Log message that includes command line option required when running on Java 9 </p><p><em>Back-ported to 8.5.x but no further as cleaner has not been back-ported further.</em></p><div>------------------------------------------------------------------------ </div><p>r1779370 | markt | 2017-01-18 19:46:27 +0100 (Wed, 18 Jan 2017) | 1 line <br/>Java 9 can throw a Java 9 specific exception here (InaccessibleObjectException) <br/>so tweak the handling </p><p><em>Back-ported to 8.5.x but no further as cleaner has not been back-ported further.</em></p><div>------------------------------------------------------------------------ </div><p>*r1762753 | remm | 2016-09-29 12:20:27 +0200 (Thu, 29 Sep 2016) | 1 line <br/>Java 9 compatibility for direct ByteBuffer cleaner. </p><p><em>Back-ported to 8.5.x but no further as cleaner has not been back-ported further.</em></p><p>------------------------------------------------------------------------ <br/>*r1758556 | markt | 2016-08-31 11:09:47 +0200 (Wed, 31 Aug 2016) | 1 line <br/>The latest Java 9 early access builds have fixed some more memory leaks. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ </p><p>*r1744323 | markt | 2016-05-17 22:36:54 +0200 (Tue, 17 May 2016) | 1 line <br/>Make checking for RMI Target memory leaks optional and log a warning if running <br/>on Java 9 without the necessary command line options </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1744149 | markt | 2016-05-16 23:36:39 +0200 (Mon, 16 May 2016) | 1 line <br/>Tomcat needs to know if it is running on Java 9 since the reflection used by <br/>the RMI memory leak detection will break unless the right command line option <br/>is specified. </p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1739492 | markt | 2016-04-16 21:08:19 +0200 (Sat, 16 Apr 2016) | 2 lines <br/>Java 9 The JRE class loaders no longer extend URLClassLoader</p><p><em>Back-ports complete</em></p><p>------------------------------------------------------------------------ <br/>r1705771 | markt | 2015-09-28 22:45:08 +0200 (Mon, 28 Sep 2015) | 1 line <br/>No need for LogManager when using stop. Can't use the Tomcat config anyway since <br/>that would resut in two processes trying to write to the same file. This was also <br/>causing an ugly stack trace on stop with Java 9 as it tried to find a logging <br/>configuration to use. </p><p><em>No longer an issue after r1809434 and back-ports</em></p><p>------------------------------------------------------------------------ <br/>r1633595 | markt | 2014-10-22 13:04:31 +0200 (Wed, 22 Oct 2014) | 1 line <br/>Java 9 Javadoc issues </p><div><em>Building with Java 9 generates warnings for Tomcat 8.0.x. 7.0.x always uses Java 7 for Javadoc. Added to optional further work.</em></div><div><em><br/></em></div><div><p>------------------------------------------------------------------------ <br/>r1653475 | markt | 2015-01-21 11:39:59 +0100 (Wed, 21 Jan 2015) | 1 line <br/>Remove use of java.endorsed.dirs since causes errors when starting with Java 9. <br/>Users that need to can still use this via setenv.sh </p><p><em>Not back-ported because Rainer has provided an improved fix for this (which has been back-ported)</em></p></div><h1 id="Java9Statustracking-Optionaladditionaltasks">Optional additional tasks</h1><div>Fix Javadoc warnings when building with Java 9 for all versions.</div><div>Refactor Tomact 7 build so Java 7 or later is used fro all parts if available.</div><div>Backport direct byte buffer clean-up to 8.0.x and 7.0.x</div>
                    </div>

                                        
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on мая 02, 2023 11:01</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
