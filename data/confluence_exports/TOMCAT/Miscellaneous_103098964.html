<!DOCTYPE html>
<html>
    <head>
        <title>Apache Tomcat : Miscellaneous</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Apache Tomcat</a></span>
                            </li>
                                                    <li>
                                <span><a href="Apache-Tomcat-Home_61320756.html">Apache Tomcat Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="FAQ_103098750.html">FAQ</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Apache Tomcat : Miscellaneous
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> ASF Infrabot</span>, last modified by <span class='editor'> Konstantin Kolinko</span> on ноя 25, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><em>Permalink</em> to this page: <a href="https://cwiki.apache.org/confluence/x/VColBg" rel="nofollow">https://cwiki.apache.org/confluence/x/VColBg</a></p><h2 id="Miscellaneous-Preface">Preface</h2><p>This section contains various miscellaneous questions that are asked frequently enough to be listed here.</p><h2 id="Miscellaneous-Questions">Questions</h2><ol><li><a href="#Miscellaneous-Q1">I am unable to compile my JSP!</a></li><li><a href="#Miscellaneous-Q2">I can't get servlets to work under /servlet/*!</a></li><li><a href="#Miscellaneous-Q3">Why is the invoker evil?</a></li><li><a href="#Miscellaneous-Q4">How to I get Tomcat's version number?</a></li><li><a href="#Miscellaneous-Q5">Tomcat eats 100% of the CPU!</a></li><li><a href="#Miscellaneous-Q6">How do I get a customized error page?</a></li><li><a href="#Miscellaneous-Q7">Should I use the LE version (of Tomcat 4)?</a></li><li><a href="#Miscellaneous-Q8">How do I configure Tomcat to NOT to store the sessions during shutdown?</a></li><li><a href="#Miscellaneous-Q10">Is there a DTD for server.xml?</a></li><li><a href="#Miscellaneous-Q11">How do I change the welcome file? ( I want to show index.jsp instead of index.html)</a></li><li><a href="#Miscellaneous-Q12">How do I enable/disable directory listings?</a></li><li><a href="#Miscellaneous-Q13">How do I use symbolic links with jars?</a></li><li><a href="#Miscellaneous-Q14">How do I change the name of the file in the download Save-As dialog from a servlet? (or jsp)</a></li><li><a href="#Miscellaneous-Q15">Is tag pooling broken? It doesn't call release!</a></li><li><a href="#Miscellaneous-Q9">How do I disable tag pooling?</a></li><li><a href="#Miscellaneous-Q16">Why do I get java.lang.IllegalStateException ?</a></li><li><a href="#Miscellaneous-Q17">How do I make a scheduled event on Tomcat?</a></li><li><a href="#Miscellaneous-Q18">What is Element &quot;web-app&quot; does not allow &quot;servlet&quot; here?</a></li><li><a href="#Miscellaneous-Q19">How do I open a file for reading in my webapp?</a></li><li><a href="#Miscellaneous-Q20">Can I run Tomcat with the JRE, or do I need the full JDK?</a></li><li><a href="#Miscellaneous-Q21">Is Tomcat an EJB server? Can I use EJBs with Tomcat?</a></li><li><a href="#Miscellaneous-Q22">Can I access Tomcat's JNDI provider from outside Tomcat?</a></li><li><a href="#Miscellaneous-Q23">Who uses Tomcat in production?</a></li><li><a href="#Miscellaneous-Q24">I'm getting java.lang.ThreadDeath exceptions when reloading my webapp.</a></li><li><a href="#Miscellaneous-Q25">Help! Even though I run shutdown.sh (or shutdown.bat), Tomcat does not stop!</a></li><li><a href="#Miscellaneous-Q26">How do I debug JSP errors in the Admin web application?</a></li><li><a href="#Miscellaneous-Q27">What order do webapps start (or How can I change startup order)?</a></li><li><a href="#Miscellaneous-Q28">What's the difference between a Valve and Filter?</a></li><li><a href="#Miscellaneous-Q29">How do I set system properties at startup?</a></li></ol><h2 id="Miscellaneous-Answers">Answers</h2><h3 id="Miscellaneous-Q1IamunabletocompilemyJSP!"><span class="confluence-anchor-link" id="Miscellaneous-Q1"></span>I am unable to compile my JSP!</h3><p>Are you seeing this?</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>      org.apache.jasper.JasperException: Unable to compile class for JSP

      An error occurred at line: -1 in the jsp file: null

      Generated servlet error:
          [javac] Since fork is true, ignoring compiler setting.
          [javac] Compiling 1 source file
          [javac] Since fork is true, ignoring compiler setting.</pre>
</div></div><p>If so, here are some solutions:</p><ul><li><a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=104949554010352&amp;w=2" rel="nofollow">Environment variable issue</a></li><li><a class="external-link" href="https://bz.apache.org/bugzilla/show_bug.cgi?id=16688" rel="nofollow">Environment issue</a> or <a class="external-link" href="https://bz.apache.org/bugzilla/show_bug.cgi?id=20527" rel="nofollow">Ant issue</a></li><li>Others have had success by added JAVA_HOME/bin to their PATH. <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=105525594928279&amp;w=2" rel="nofollow">[1]</a> <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=105526353505541&amp;w=2" rel="nofollow">[2]</a> and make sure you are using the full JDK and not the JRE.</li></ul><p>In the case of the Environment issues, it is typical that on Windows, the startup scripts work fine and the service does not. The service uses registry values to look for java and other &quot;stuff&quot;.</p><h3 id="Miscellaneous-Q2Ican&#39;tgetservletstoworkunder/servlet/*!"><span class="confluence-anchor-link" id="Miscellaneous-Q2"></span>I can't get servlets to work under /servlet/*!</h3><p>Using /servlet/ to map servlets is evil, absolutely evil. Even more evil than <a class="external-link" href="http://www.eviloverlord.com/lists/overlord.html" rel="nofollow">this</a> . That being said, here are some threads that may answer this:</p><ul><li><a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=103417249925541&amp;w=2" rel="nofollow">(SECURITY) Apache Tomcat 4.x JSP source disclosure</a> vulnerability</li><li><a class="external-link" href="https://marc.info/?t=103945337100003&amp;r=1&amp;w=2" rel="nofollow">Cannot Run Servlets, only JSP's, Part II</a></li><li><a class="external-link" href="https://marc.info/?t=104326854100001&amp;r=1&amp;w=2" rel="nofollow">Tomcat configuration problem: JSPs work, servlets don't</a></li></ul><h3 id="Miscellaneous-Q3Whyistheinvokerevil?"><span class="confluence-anchor-link" id="Miscellaneous-Q3"></span>Why is the invoker evil?</h3><p>This is opinions of the writer (YMMV) Quickie about the invoker: The invoker is a dynamic servlet which allows run-time loading of other servlets based on class name. This servlet is the one that allows <em><span class="nolink">http://localhost/servlet/com.foo.MyClass?more=cowbell</span></em>, where <code>com.foo.MyClass</code> is some class which can be loaded as a servlet but was never explicitly declared in a config file.</p><p>Evil because:</p><ul><li>Security risk ... see links above</li><li>Configuration hiding - There is NO way to determine which servlets are used vs which are not used. In web.xml, every servlet is declared and mapped. In that one file you instantly have a road map to how the webapp works.</li><li>Back doors. Servlets which <strong>are</strong> mapped can be alternately called via the invoker by class name. Since the URL is different, all security constraints might be ignored since the URL pattern is VERY different.</li><li>Back doors. Bad programmers make it easier to do bad things.</li><li>Back doors. It may be common to use common 3rd party jars in a shared area. If that shared jar has servlets in them and that servlet has a hole in it, bad things happen.</li><li>Configuration hiding - it's important enough to say twice. Explicit declaration while a PITA, will be more helpful in the maintenance scheme of your webapp.</li></ul><p>For another explanation of the invoker servlet, why it's evil, and what to do about it, see <a class="external-link" href="https://coderanch.com/wiki/660115/Invoker-Servlet" rel="nofollow">JavaRanch FAQ</a>.</p><h3 id="Miscellaneous-Q4HowtoIgetTomcat&#39;sversionnumber?"><span class="confluence-anchor-link" id="Miscellaneous-Q4"></span>How to I get Tomcat's version number?</h3><p><code>javax.servlet.ServletContext.getServerInfo();</code></p><p>Starting with Tomcat 5.0.28 - there is now a version.sh (or version.bat) program in the bin directory. It will print the version number of Tomcat to Standard output.</p><h3 id="Miscellaneous-Q5Tomcateats100%oftheCPU!"><span class="confluence-anchor-link" id="Miscellaneous-Q5"></span>Tomcat eats 100% of the CPU!</h3><p>Odds are, it might be the garbage collector going wacky.</p><p>In 1.4.1 JVMs there is a memory leak which could hampering the garbage collector. <a class="external-link" href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=4724129" rel="nofollow">More information</a> Otherwise - get a memory profiler and/or tweak your memory settings.</p><h3 id="Miscellaneous-Q6HowdoIgetacustomizederrorpage?"><span class="confluence-anchor-link" id="Miscellaneous-Q6"></span>How do I get a customized error page?</h3><p>In your <code>WEB-INF/web.xml</code> file:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Default" data-theme="Default">    &lt;error-page&gt;
        &lt;error-code&gt;404&lt;/error-code&gt;
        &lt;location&gt;/error/404.html&lt;/location&gt;
    &lt;/error-page&gt;</pre>
</div></div><p>You may also catch error 500's as well as other specific exceptions or exceptions which extend Throwable. For more information, see the Servlet Specification for all the gory details of how you can play with this.</p><h3 id="Miscellaneous-Q7ShouldIusetheLEversion(ofTomcat4)?"><span class="confluence-anchor-link" id="Miscellaneous-Q7"></span>Should I use the LE version (of Tomcat 4)?</h3><p>No. It was an experiment, it failed. (YMMV) The original purpose of LE &quot;light&quot; edition of Tomcat 4.0, 4.1 was because jdk1.4 provides a LOT of standard functionality that Tomcat uses that was not in jdk1.3. So to save some space two distributions were made to save some bandwidth. Since then, it has been an exercise in confusion. (Flame me if you disagree) <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=105341005928071&amp;w=2" rel="nofollow">More info</a></p><h3 id="Miscellaneous-Q8HowdoIconfigureTomcattoNOTtostorethesessionsduringshutdown?"><span class="confluence-anchor-link" id="Miscellaneous-Q8"></span>How do I configure Tomcat to NOT to store the sessions during shutdown?</h3><p><a class="external-link" href="https://tomcat.apache.org/tomcat-9.0-doc/config/manager.html" rel="nofollow">Look at the Session manager component</a> and tweak accordingly. One way is to tell Tomcat to persist sessions to a path which does not exist. (So Tomcat will not store, or be able to load the sessions).</p><h3 id="Miscellaneous-Q10IsthereaDTDforserver.xml?"><span class="confluence-anchor-link" id="Miscellaneous-Q10"></span>Is there a DTD for server.xml?</h3><p>No! Nor can one accurately exist. <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=104205666221372&amp;w=2" rel="nofollow">Here's why</a></p><h3 id="Miscellaneous-Q11HowdoIchangethewelcomefile?(Iwanttoshowindex.jspinsteadofindex.html)"><span class="confluence-anchor-link" id="Miscellaneous-Q11"></span>How do I change the welcome file? ( I want to show index.jsp instead of index.html)</h3><p>This is done in web.xml by changing welcome-files-list. <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=104566785828794&amp;w=2" rel="nofollow">More detail</a>.</p><h3 id="Miscellaneous-Q12HowdoIenable/disabledirectorylistings?"><span class="confluence-anchor-link" id="Miscellaneous-Q12"></span>How do I enable/disable directory listings?</h3><p>To make a global change, this is done in CATALINA_BASE/conf/web.xml by changing the listings property for the default servlet.</p><p>If you want to enable it for an individual webapp, then you need to add something similar to the following to your <code>WEB-INF/web.xml</code> file (for your individual app):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Default" data-theme="Default">   &lt;servlet&gt;
       &lt;servlet-name&gt;listing&lt;/servlet-name&gt;
       &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;
       &lt;init-param&gt;
           &lt;param-name&gt;debug&lt;/param-name&gt;
           &lt;param-value&gt;0&lt;/param-value&gt;
       &lt;/init-param&gt;
       &lt;init-param&gt;
           &lt;param-name&gt;listings&lt;/param-name&gt;
           &lt;param-value&gt;true&lt;/param-value&gt;
       &lt;/init-param&gt;
       &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
   &lt;/servlet&gt;

   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;listing&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;</pre>
</div></div><p><br/></p><h3 id="Miscellaneous-Q13HowdoIusesymboliclinkswithjars?"><span class="confluence-anchor-link" id="Miscellaneous-Q13"></span>How do I use symbolic links with jars?</h3><p>You'll need to tweak with server.xml and <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=105159411609623&amp;w=2" rel="nofollow">do this</a>. (Don't worry - its really easy!) Update: you should be worried – this feature has its drawbacks.</p><h3 id="Miscellaneous-Q14HowdoIchangethenameofthefileinthedownloadSave-Asdialogfromaservlet?(orjsp)"><span class="confluence-anchor-link" id="Miscellaneous-Q14"></span>How do I change the name of the file in the download Save-As dialog from a servlet? (or jsp)</h3><p>Use the Content-Disposition header (as defined by <a class="external-link" href="https://tools.ietf.org/html/rfc6266" rel="nofollow">RFC6266</a>).</p><h3 id="Miscellaneous-Q15Istagpoolingbroken?Itdoesn&#39;tcallrelease!"><span class="confluence-anchor-link" id="Miscellaneous-Q15"></span>Is tag pooling broken? It doesn't call release!</h3><p>It is not broken, your tag probably is. Many bug reports have been filed about this. <a class="external-link" href="https://bz.apache.org/bugzilla/show_bug.cgi?id=16001" rel="nofollow">Bug 16001</a> has all the gory details. There is also a nice <a class="external-link" href="https://tomcat.apache.org/taglibs/site/guidelines.html" rel="nofollow">description of the life cycle</a>.</p><p>Note, that this issue does not affect the <code>SimpleTag</code> tags and tag files of JSP 2.0 and later specifications, because those do not use tag pooling.</p><h3 id="Miscellaneous-Q9HowdoIdisabletagpooling?"><span class="confluence-anchor-link" id="Miscellaneous-Q9"></span>How do I disable tag pooling?</h3><p>To disable tag pooling: See $CATALINA_BASE/conf/web.xml file and set enablePooling=false for the <code>JspServlet</code> declaration.</p><p><strong><em>Note</em>:</strong> This option, as well as most other configuration options of <a class="external-link" href="https://tomcat.apache.org/tomcat-9.0-doc/jasper-howto.html" rel="nofollow">JspServlet</a>, affects code generation and compilation of JSP pages. It will not alter the behavior of JSPs that have already been compiled.</p><h3 id="Miscellaneous-Q16WhydoIgetjava.lang.IllegalStateException?"><span class="confluence-anchor-link" id="Miscellaneous-Q16"></span>Why do I get <code>java.lang.IllegalStateException</code> ?</h3><p>These are the most common reasons how you can get an <code>java.lang.IllegalStateException:</code></p><ul><li>Calling <code>setBufferSize</code> and content has been written.</li><li>The response has been committed and you do any of the following:<ul><li>Calling <code>ServletResponse.reset()</code> or <code>ServletResponse.resetBuffer()</code></li><li>Calling either <code>HttpServletResponse.sendError()</code> or <code>HttpServletResponse.sendRedirect()</code>.</li><li>Calling <code>RequestDispatcher.forward()</code> which includes performing a jsp:forward</li><li>Calling <code>RequestDispatcher.forward()</code> which includes performing a jsp:forward</li></ul></li></ul><p>Remember that if you call <code>forward()</code> or <code>sendRedirect()</code>, any following lines of code will still execute. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  ...
  response.sendRedirect(&quot;foo.jsp&quot;);
  // At this point, you should probably have a return statement otherwise
  // the following code will run
  System.out.println(&quot;After redirect! By the way ...&quot;);
  System.out.println(&quot;Use commons-logging or log4j, not System.out&quot;);
  System.out.println(&quot;System.out is a bad practice!&quot;);

  response.sendRedirect(&quot;bar.jsp&quot;); /* This will throw an error! */

}</pre>
</div></div><h3 id="Miscellaneous-Q17HowdoImakeascheduledeventonTomcat?"><span class="confluence-anchor-link" id="Miscellaneous-Q17"></span>How do I make a scheduled event on Tomcat?</h3><p>Tomcat does not support this directly. Its not part of the Servlet or JSP Specification. If you do need this functionality see <a class="external-link" href="https://tomee.apache.org/" rel="nofollow">Apache TomEE</a> which includes support for the <a class="external-link" href="https://docs.oracle.com/javaee/6/api/javax/ejb/Schedule.html" rel="nofollow">@Schedule</a> annotation and <a class="external-link" href="https://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html" rel="nofollow">ScheduleExpression API</a>, or see <a class="external-link" href="https://marc.info/?t=106192918700004&amp;r=1&amp;w=2" rel="nofollow">this thread</a> or <a class="external-link" href="https://marc.info/?l=tomcat-user&amp;m=106157051231075&amp;w=2" rel="nofollow">this link</a>.</p><h3 id="Miscellaneous-Q18WhatisElement&quot;web-app&quot;doesnotallow&quot;servlet&quot;here?"><span class="confluence-anchor-link" id="Miscellaneous-Q18"></span>What is Element &quot;web-app&quot; does not allow &quot;servlet&quot; here?</h3><p>Your web.xml is not well formed or it is not conforming to the DTD as defined by the servlet spec. Use an XML validator to ensure your web.xml file is ok.</p><h3 id="Miscellaneous-Q19Howdoopenafileforreadinginmywebapp?"><span class="confluence-anchor-link" id="Miscellaneous-Q19"></span>How do open a file for reading in my webapp?</h3><p>Use <code>ServletContext.getResourceAsStream()</code></p><h3 id="Miscellaneous-Q20CanIrunTomcatwiththeJRE,ordoIneedthefullJDK?"><span class="confluence-anchor-link" id="Miscellaneous-Q20"></span>Can I run Tomcat with the JRE, or do I need the full JDK?</h3><p>Tomcat 4 requires the full JDK. Tomcat 5.5 onwards will work with a JRE or a JDK.</p><h3 id="Miscellaneous-Q21IsTomcatanEJBserver?CanIuseEJBswithTomcat?"><span class="confluence-anchor-link" id="Miscellaneous-Q21"></span>Is Tomcat an EJB server? Can I use EJBs with Tomcat?</h3><p>Tomcat is not an EJB server. Tomcat is not a full JavaEE server. Tomcat is a Servlet container. Tomcat does support those parts of the JavaEE specification that are required for Servlets, such as a subset of JNDI functionality. Furthermore, you can connect to remote JavaEE servers, or run Tomcat embedded inside a full JavaEE server.</p><p><a class="external-link" href="https://tomee.apache.org/apache-tomee.html" rel="nofollow">Apache TomEE</a> is a Java EE certified distribution built from Tomcat and contains support for EJB, CDI, JSF, JPA, BeanValidation and Transactions. The goal of TomEE is to maintain all Tomcat functionality and identity, only adding what is necessary to pass that Java EE 6 Web Profile TCK. A second distribution, called TomEE Plus, adds JAX-RS, JAX-WS, JMS and support for the JavaEE Connector Architecture.</p><h3 id="Miscellaneous-Q22CanIaccessTomcat&#39;sJNDIproviderfromoutsideTomcat?"><span class="confluence-anchor-link" id="Miscellaneous-Q22"></span>Can I access Tomcat's JNDI provider from outside Tomcat?</h3><p>Not at this time.</p><h3 id="Miscellaneous-Q23WhousesTomcatinproduction?"><span class="confluence-anchor-link" id="Miscellaneous-Q23"></span>Who uses Tomcat in production?</h3><p>Numerous organizations across various industries all over the world. There is a <a href="PoweredBy_103099576.html">PoweredBy</a> page in this wiki.</p><h3 id="Miscellaneous-Q24I&#39;mgettingjava.lang.ThreadDeathexceptionswhenreloadingmywebapp."><span class="confluence-anchor-link" id="Miscellaneous-Q24"></span>I'm getting <code>java.lang.ThreadDeath</code> exceptions when reloading my webapp.</h3><p>See <a class="external-link" href="https://bz.apache.org/bugzilla/show_bug.cgi?id=26372" rel="nofollow">Bugzilla discussion</a> of this.</p><h3 id="Miscellaneous-Q25Help!EventhoughIrunshutdown.sh(orshutdown.bat),Tomcatdoesnotstop!"><span class="confluence-anchor-link" id="Miscellaneous-Q25"></span>Help! Even though I run shutdown.sh (or shutdown.bat), Tomcat does not stop!</h3><p>Most likely, a non-daemon thread is running. JVM's do not shutdown until there are 0 non-daemon threads. You will need to perform a <a href="HowTo_103099265.html#HowTo-HowdoIobtainathreaddumpofmyrunningwebapp?">thread dump</a> to determine the code which started the thread.</p><h3 id="Miscellaneous-Q26HowdoIdebugJSPerrorsintheAdminwebapplication?"><span class="confluence-anchor-link" id="Miscellaneous-Q26"></span>How do I debug JSP errors in the Admin web application?</h3><p>The admin web application that was shiped with Tomcat's binary distribution of Tomcat 5.5 and earlier, contained pre-compiled JSPs and mappings for them. In order to debug these JSPs, you need to get the source versions, place them in the admin webapp directory, and disable the JSPC-generated web.xml servlet mappings. Here's how to do it from scratch for a clean Tomcat installation:</p><ol><li>Download Tomcat's base and admin webapp distributions (binaries), unzip to a directory of your choice. We'll use c:\temp in this example.</li><li>Edit c:\temp\server\webapps\admin\WEB-INF\web.xml to remove the JSPC-generated servlet mappings. These are marked in the web.xml file with comments indicating the beginning and end of the JSPC section. You can simply comment out all these servlet-mappping elements. Be careful not to comment out other servlet mappings such as the Struts dispatcher servlet.</li><li>Open c:\temp\server\webapps\admin\WEB-INF\lib\catalina-admin.jar with a zip file program like <code>WinZip</code>. Remove the files named *_jsp.class, as these are the compiled JSPs. Do not remove the other class files, the ones under the org/apache/ paths.</li><li>Download a Tomcat source distribution and unzip it to a directory of your choice, but not the same directory that you used above. We'll use c:\src in this example.</li><li>Copy everything <strong>except</strong> the WEB-INF/lib directory from c:\src\container\webapps\admin to c:\temp\server\webapps\admin. Now you will have the uncompiled admin webapp JSPs.</li><li>If you haven't already, define an admin user in %CATALINA_HOME%\conf\tomcat-users.xml.</li><li><p class="auto-cursor-target">Start Tomcat, navigate to <em><span class="nolink">http://localhost:8080</span></em> (or your actual server:port if you have modified the default values), and access the admin web application. It will run slower because Tomcat is now compiling the JSPs on-demand the first time you access them, but should otherwise appear normal.</p></li></ol><h3 id="Miscellaneous-Q27Whatorderdowebappsstart(orhowcanIchangestartuporder)?"><span class="confluence-anchor-link" id="Miscellaneous-Q27"></span>What order do webapps start (or how can I change startup order)?</h3><p>There is no expected startup order. Neither the Servlet spec nor Tomcat define one. You can't rely on the apps starting in any particular order.</p><p>While the above statement is certainly true, there is a potential &quot;workaround&quot;:<br/>If you actually have two (or more) apps depending on each other, you may decide to start multiple services in you server.xml:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Default" data-theme="Default">&lt;Service name=&quot;Webapps1&quot;&gt;
  &lt;Connector .../&gt;

  &lt;Engine ...&gt;
     &lt;Host appbase=&quot;webapps1&quot; ...&gt;
       ...        
     &lt;/Host&gt;
  &lt;/Engine&gt;
&lt;/Service&gt;
&lt;Service name=&quot;Webapps2&quot;&gt;
  &lt;Connector .../&gt;

  &lt;Engine ...&gt;
     &lt;Host appbase=&quot;webapps2&quot; ...&gt;
       ...        
     &lt;/Host&gt;
  &lt;/Engine&gt;
&lt;/Service&gt;</pre>
</div></div><p>I.e. you split the regular &quot;/webapps&quot; directory into &quot;/webapps1&quot; and &quot;/webapps2&quot;, whereas everything in the former is deployed and started before the later. The drawback is that you need separate ports for the services.</p><h3 id="Miscellaneous-Q28What&#39;sthedifferencebetweenaValveandFilter?"><span class="confluence-anchor-link" id="Miscellaneous-Q28"></span>What's the difference between a Valve and Filter?</h3><p>A Filter lives in the webapp space and its behavior is defined by the Servlet spec. It will work across all Servlet containers.</p><p>A Valve can do everything a Filter can do but is Tomcat specific, and potentially not portable across Tomcat versions. A Valve can be executed earlier in the lifecycle of a request, access Tomcat internals, and do other &quot;interesting&quot; decorations to your webapp in the chance you cannot change your deployed webapp.</p><p>If you can achieve the desired functionality with a Filter, it is the preferred way to go.</p><h3 id="Miscellaneous-Q29HowdoIsetsystempropertiesatstartup?"><span class="confluence-anchor-link" id="Miscellaneous-Q29"></span>How do I set system properties at startup?</h3><p>Create a <code>setenv.bat</code> or <code>setenv.sh</code> file. It is documented in RUNNING.txt.</p><p>Example (windows):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>bin/setenv.bat</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Default" data-theme="Default">SET CATALINA_OPTS=&#39;-DpropName=propValue&#39;</pre>
</div></div><p>Example (UNIX): </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>bin/setenv.sh</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Default" data-theme="Default">export CATALINA_OPTS=&#39;-DpropName=propValue&#39;</pre>
</div></div><p>Windows service users — use service configuration application (e.g. <code>tomcat9w.exe</code>).</p>
                    </div>

                                        
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on мая 02, 2023 11:01</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
