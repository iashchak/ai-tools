<!DOCTYPE html>
<html>
    <head>
        <title>TIKA : TikaWithoutFiles</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">TIKA</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            TIKA : TikaWithoutFiles
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> ASF Infrabot</span> on мар 26, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="TikaWithoutFiles-WhendoesTikaneed/createaFileratherthanan?">When does Tika need/create a File rather than an <a class="unresolved" href="#">InputStream</a>?</h1>
<h2 id="TikaWithoutFiles-Detection">Detection</h2>
<p>Tika will be able to do mime-magic detection, for the formats where that's possible, with just a re-windable / mark+reset <code>InputStream</code>. Generally Tika uses the first 64kb of the stream for this, but the first 4kb should be enough for the majority of the mime-magic matches</p>

<p>For some file formats, generally Container Based formats, Tika needs the whole of the File (plus the Tika Parsers package!) to be able to correctly detect the file type. This is because some formats only have mime-magic which identify the Container itself (eg Zip), and you need to look inside the Container to find the specific subtype (eg <code>XLSX</code> = <code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</code>). For this either the File object is needed, or Tika would need to spool the stream out to a Temporary File.</p>

<p>It is best to make use of <code>TikaInputStream.get(File)</code> or <code>TikaInputStream.get(InputStream)</code> to have your stream/file wrapped for possible temp file creation / file access, if possible</p>

<p>Note - Tika should be given the filename if possible, to help guide mime-magic and container detection</p>

<h2 id="TikaWithoutFiles-Parsing">Parsing</h2>
<p>Some formats require a File to be able to be parsed. This is because of restrictions in the underlying Java libraries being used</p>

<p>Some formats work better with a File when parsing. This is because it permits lower memory use, as back-and-forth searching can be handled without buffering the whole stream</p>

<h2 id="TikaWithoutFiles-AsofApacheTika1.17">As of Apache Tika 1.17</h2>
<p>As of Apache Tika 1.17 (note - other versions may differ because of changes in the underlying Java libraries), the following formats require Files or create temporary Files if not:</p>

<p>jpeg, zip (for detection) and derived (docx, xlsx, pptx), ole2 (for detection) and derived (doc, xls, ppt), mdb, pst, rar, 7zip, sqlite...</p>
                    </div>

                                        
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on мая 02, 2023 15:13</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
