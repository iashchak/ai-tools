<!DOCTYPE html>
<html>
    <head>
        <title>TIKA : ComparisonTikaAndPDFToText201811</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">TIKA</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            TIKA : ComparisonTikaAndPDFToText201811
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> ASF Infrabot</span>, last modified on мар 26, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="ComparisonTikaAndPDFToText201811-Background">Background</h1>
<p>After refreshing Tika's regression corpus (see <a href="CommonCrawl3_109454042.html">CommonCrawl3</a> and <a class="external-link" href="https://issues.apache.org/jira/browse/TIKA-2750" rel="nofollow">TIKA-2750</a>), we thought it might be interesting to run a comparison between the text extracted with pdftotext and Tika/PDFBox.  Given that pdftotext does not extract content from embedded files and given that it does not perform Optical Character Recognition (OCR) or offer integration with OCR, this evaluation focused only on extracting electronic text as stored within PDFs.  The goals of this study include:</p>

<ol>
	<li>Identify areas for improvements for PDFBox and pdftotext 2. Identify areas for improvements for tika-eval
<br class="atl-forced-newline"/></li>
</ol>


<p>The reader should <strong>not</strong> read the following as a recommendation for one tool over another.</p>

<p>The tika-eval reports and the full H2 database of comparison results are available here: <a class="external-link" href="http://162.242.228.174/pdf_parsing/pdftotextVPDFBox_201811/" rel="nofollow">http://162.242.228.174/pdf_parsing/pdftotextVPDFBox_201811/</a>.</p>

<p><strong>NOTE:</strong> On December 11, 2018, I reran the analysis with the pdftotext commandline option <em>-cfg</em> to specify the (font) configuration file.  During the first run and the initial analysis, <em>pdftotext</em> was not applying the custom fonts even though the xpdfrc file was placed in <em>/usr/local/etc/xpdfrc</em>.  This wiki has been updated to reflect the slight differences in the re-run of the evaluation.  In general, it appears, based on the common words metric, that text extraction did improve for Japanese and Chinese PDFs when we used the <em>-cfg</em> option to manually specify the <em>xpdfrc</em> config file that points to the language-specific extra font files.</p>

<h1 id="ComparisonTikaAndPDFToText201811-ToolsandData">Tools and Data</h1>
<ul>
	<li>Operating system: Linux cloud-server-02 3.10.0-327.10.1.el7.x86_64 #1 SMP Sat Jan 23 04:54:55 EST 2016 x86_64 GNU/Linux (Red Hat Enterprise Linux Server release 7.0 (Maipo)). We relied on the default system fonts.  We have made no modifications to the default OS, nor have we installed fonts.
<br class="atl-forced-newline"/></li>
	<li>pdftotext – we downloaded the most recent available binaries, version 4.00.01, and we followed the directions to install all language modules (see <a class="external-link" href="https://wiki.apache.org/tika/VirtualMachine#pdftotext" rel="nofollow">virtual machine</a>). We wrote a simple Groovy wrapper to call a new pdftotext process for every file; if no extract file was generated by pdftotext, the Groovy script generated a 0-byte file; also, we forced a timeout after 300 seconds (5 minutes).</li>
	<li>Tika/PDFBox – we used a snapshot version of Tika 1.20, which uses PDFBox 2.0.12.  We used the default settings and did not sort by position, etc.  We did enable permissions checking so that text was not extracted from PDF files that did not allow text extraction.</li>
	<li>Tika identified 528,618 PDF files in the new pull from Common Crawl. Many of these files are truncated, and 6,787 caused permission exceptions (these are either encrypted or they do not allow extraction of text).
<br class="atl-forced-newline"/>
<br class="atl-forced-newline"/></li>
</ul>


<h1 id="ComparisonTikaAndPDFToText201811-Exceptions">Exceptions</h1>
<p>There were 58,077 empty files generated by our wrapper of pdftotext.  Given that pdftotext respects access permissions, that means that there may have been up to 51,290 runtime exceptions; of these, seven files caused timeouts. Some kind of content (number of tokens &gt; 0) was extracted for 400,782 files; there were 373,569 extracts that contained &gt;= 100 tokens.</p>

<p>Aside from the &quot;permission exceptions&quot;, there were 38,158 files that caused a runtime exception for PDFBox.  Some kind of content (number of tokens &gt; 0) was extracted for 428,706 files.  Note that for this evaluation, we used a standard default content handler that appends the title to the extracted content.  Therefore, we also report that there were 384,277 extracts that contained &gt;= 100 tokens.</p>


<h1 id="ComparisonTikaAndPDFToText201811-HighLevelComparison">High Level Comparison</h1>
<p>In the absence of ground truth, tika-eval counts the number of &quot;common words&quot; (see: <a class="external-link" href="https://wiki.apache.org/tika/TikaEvalMetrics#Common%20Words" rel="nofollow">Common Words</a>) per file as a rough proxy for extraction quality. The extracts generated by pdftotext contained  612,693,477 &quot;common words&quot;, and the extracts from Tika/PDFBox contained 615,269,581.  By this metric, that would be a 0.42% increase in the extraction of common tokens if one moved from pdftotext to Tika/PDFBox.  </p>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>In manually reviewing the results, we noticed that Tika/PDFBox was apparently performing far better when there was a disagreement in language id (see the section below on Languages).  We noticed that as the content between the two extracts became more similar, there were often more examples of areas for improvement in spacing in Tika/PDFBox's extracts than in pdftotext's extracts.  Based on this observation, we calculated the number of common tokens extracted for each tool when the language id for both extracts was the same <em>or</em> where there was only content for one of the extracts (but not the other) [SQL1] and [SQL2].  When we do this, the difference narrows even more &#8211; pdftotext extracts 607,187,545 common tokens, whereas PDFBox/Tika extracts 607,324,140 (a 0.02% increase).</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />

<p><strong>Bottom line</strong>: based on this analysis so far, the differences between the tools for extracting electronic text are not great.  It appears that PDFBox extracts slightly more content.  However, the reports and this preliminary analysis point to areas for improvement in both tools and in tika-eval.</p>

<h2 id="ComparisonTikaAndPDFToText201811-Languages">Languages</h2>

<p>In the following, we show the top 20 languages identified in the extracted text.  The tika-eval module uses the <a class="external-link" href="https://github.com/optimaize/language-detector" rel="nofollow">optimaize language detector</a> (version 0.6) for language identification. The language codes are roughly <a class="external-link" href="https://www.loc.gov/standards/iso639-2/php/code_list.php" rel="nofollow">ISO 639-1</a>.</p>

<p>The first language is that identified in the extract from pdftotext, and the second is the language identified on the extract of PDFBox.  For example 'en-&gt;fa' means that language id returned 'en' on the pdftotext extract, but 'fa' on the Tika/PDFBox extract.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p>Language id</p></td>
<td class="confluenceTd"><p>Number of Files</p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;en </p></td>
<td class="confluenceTd"><p> 143,784 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ru-&gt;ru </p></td>
<td class="confluenceTd"><p> 44,460 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fr-&gt;fr </p></td>
<td class="confluenceTd"><p> 38,872 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> it-&gt;it </p></td>
<td class="confluenceTd"><p> 36,433 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> de-&gt;de </p></td>
<td class="confluenceTd"><p> 30,151 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> es-&gt;es </p></td>
<td class="confluenceTd"><p> 18,335 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ja-&gt;ja </p></td>
<td class="confluenceTd"><p> 16,106 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> el-&gt;el </p></td>
<td class="confluenceTd"><p> 9,761 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fa-&gt;fa </p></td>
<td class="confluenceTd"><p> 8,486 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ko-&gt;ko </p></td>
<td class="confluenceTd"><p> 8,213 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> zh-cn-&gt;zh-cn </p></td>
<td class="confluenceTd"><p> 5,815 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tr-&gt;tr </p></td>
<td class="confluenceTd"><p> 5,477 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> null </p></td>
<td class="confluenceTd"><p> 3,132 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> vi-&gt;vi </p></td>
<td class="confluenceTd"><p> 2,981 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> he-&gt;he </p></td>
<td class="confluenceTd"><p> 2,280 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ar-&gt;ar </p></td>
<td class="confluenceTd"><p> 2,087 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ca-&gt;ca </p></td>
<td class="confluenceTd"><p> 1,275 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;fa </p></td>
<td class="confluenceTd"><p> 1,240 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pt-&gt;pt </p></td>
<td class="confluenceTd"><p> 1,105 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> de-&gt;en </p></td>
<td class="confluenceTd"><p> 860 </p></td>
</tr>
</tbody></table></div>


<p>In the following, we show the top 10 language id pairs, where the language id differs between the extracts.</p>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p>Language ids</p></td>
<td class="confluenceTd"><p>Number of Files</p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;fa </p></td>
<td class="confluenceTd"><p> 1,240 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> de-&gt;en </p></td>
<td class="confluenceTd"><p> 860 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;de </p></td>
<td class="confluenceTd"><p> 519 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;bn </p></td>
<td class="confluenceTd"><p> 392 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ar-&gt;fa </p></td>
<td class="confluenceTd"><p> 391 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> it-&gt;en </p></td>
<td class="confluenceTd"><p> 209 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;it </p></td>
<td class="confluenceTd"><p> 209 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fr-&gt;en </p></td>
<td class="confluenceTd"><p> 201 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en-&gt;fr </p></td>
<td class="confluenceTd"><p> 149 </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> br-&gt;bn </p></td>
<td class="confluenceTd"><p> 146 </p></td>
</tr>
</tbody></table></div>


<h1 id="ComparisonTikaAndPDFToText201811-&quot;CommonWords&quot;perLanguage(id)">&quot;Common Words&quot; per Language (id)</h1>
<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>In the following table, we present the number of "common words" extracted per language id [SQL3].  Note that this language "id" is based on the extracted text per tool, <em>not</em> ground truth.  Some care has to be made in interpreting this data. </p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />


<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p>Language Id</p></td>
<td class="confluenceTd"><p> pdftotext </p></td>
<td class="confluenceTd"><p> Tika/PDFBox </p></td>
<td class="confluenceTd"><p>% Change</p></td>
</tr>
<tr>
<td class="confluenceTd"><p> null </p></td>
<td class="confluenceTd"><p>  5,729  </p></td>
<td class="confluenceTd"><p>  2,757  </p></td>
<td class="confluenceTd"><p> -51.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> af </p></td>
<td class="confluenceTd"><p>  10,513  </p></td>
<td class="confluenceTd"><p>  11,192  </p></td>
<td class="confluenceTd"><p> 6.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> an </p></td>
<td class="confluenceTd"><p>  113,326  </p></td>
<td class="confluenceTd"><p>  88,633  </p></td>
<td class="confluenceTd"><p> -21.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ar </p></td>
<td class="confluenceTd"><p>  2,272,891  </p></td>
<td class="confluenceTd"><p>  1,832,365  </p></td>
<td class="confluenceTd"><p> -19.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ast </p></td>
<td class="confluenceTd"><p>  15,507  </p></td>
<td class="confluenceTd"><p>  16,927  </p></td>
<td class="confluenceTd"><p> 9.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> be </p></td>
<td class="confluenceTd"><p>  34  </p></td>
<td class="confluenceTd"><p>  74  </p></td>
<td class="confluenceTd"><p> 117.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> bg </p></td>
<td class="confluenceTd"><p>  22,582  </p></td>
<td class="confluenceTd"><p>  25,887  </p></td>
<td class="confluenceTd"><p> 14.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> bn </p></td>
<td class="confluenceTd"><p>  5,648  </p></td>
<td class="confluenceTd"><p>  201,707  </p></td>
<td class="confluenceTd"><p> 3471.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> br </p></td>
<td class="confluenceTd"><p>  21,470  </p></td>
<td class="confluenceTd"><p>  21,282  </p></td>
<td class="confluenceTd"><p> -0.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ca </p></td>
<td class="confluenceTd"><p>  301,284  </p></td>
<td class="confluenceTd"><p>  307,474  </p></td>
<td class="confluenceTd"><p> 2.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> cs </p></td>
<td class="confluenceTd"><p>  26,933  </p></td>
<td class="confluenceTd"><p>  32,126  </p></td>
<td class="confluenceTd"><p> 19.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> cy </p></td>
<td class="confluenceTd"><p>  72,368  </p></td>
<td class="confluenceTd"><p>  70,987  </p></td>
<td class="confluenceTd"><p> -1.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> da </p></td>
<td class="confluenceTd"><p>  24,702  </p></td>
<td class="confluenceTd"><p>  29,576  </p></td>
<td class="confluenceTd"><p> 19.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> de </p></td>
<td class="confluenceTd"><p>  30,132,564  </p></td>
<td class="confluenceTd"><p>  31,337,406  </p></td>
<td class="confluenceTd"><p> 4.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> el </p></td>
<td class="confluenceTd"><p>  9,432,310  </p></td>
<td class="confluenceTd"><p>  9,572,594  </p></td>
<td class="confluenceTd"><p> 1.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en </p></td>
<td class="confluenceTd"><p>  245,298,469  </p></td>
<td class="confluenceTd"><p>  256,492,056  </p></td>
<td class="confluenceTd"><p> 4.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> es </p></td>
<td class="confluenceTd"><p>  39,476,601  </p></td>
<td class="confluenceTd"><p>  40,478,683  </p></td>
<td class="confluenceTd"><p> 2.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> et </p></td>
<td class="confluenceTd"><p>  38,174  </p></td>
<td class="confluenceTd"><p>  23,226  </p></td>
<td class="confluenceTd"><p> -39.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> eu </p></td>
<td class="confluenceTd"><p>  17,771  </p></td>
<td class="confluenceTd"><p>  14,476  </p></td>
<td class="confluenceTd"><p> -18.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fa </p></td>
<td class="confluenceTd"><p>  19,376,868  </p></td>
<td class="confluenceTd"><p>  21,751,814  </p></td>
<td class="confluenceTd"><p> 12.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fi </p></td>
<td class="confluenceTd"><p>  10,195  </p></td>
<td class="confluenceTd"><p>  10,628  </p></td>
<td class="confluenceTd"><p> 4.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fr </p></td>
<td class="confluenceTd"><p>  61,980,431  </p></td>
<td class="confluenceTd"><p>  65,709,586  </p></td>
<td class="confluenceTd"><p> 6.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ga </p></td>
<td class="confluenceTd"><p>  28,809  </p></td>
<td class="confluenceTd"><p>  25,165  </p></td>
<td class="confluenceTd"><p> -12.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> gl </p></td>
<td class="confluenceTd"><p>  206,752  </p></td>
<td class="confluenceTd"><p>  220,055  </p></td>
<td class="confluenceTd"><p> 6.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> gu </p></td>
<td class="confluenceTd"><p>  3,456  </p></td>
<td class="confluenceTd"><p>  3,840  </p></td>
<td class="confluenceTd"><p> 11.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> he </p></td>
<td class="confluenceTd"><p>  3,389,105  </p></td>
<td class="confluenceTd"><p>  3,358,894  </p></td>
<td class="confluenceTd"><p> -0.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hi </p></td>
<td class="confluenceTd"><p>  266,969  </p></td>
<td class="confluenceTd"><p>  264,400  </p></td>
<td class="confluenceTd"><p> -1.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hr </p></td>
<td class="confluenceTd"><p>  30,780  </p></td>
<td class="confluenceTd"><p>  30,632  </p></td>
<td class="confluenceTd"><p> -0.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ht </p></td>
<td class="confluenceTd"><p>  8,498  </p></td>
<td class="confluenceTd"><p>  3,570  </p></td>
<td class="confluenceTd"><p> -58.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hu </p></td>
<td class="confluenceTd"><p>  13,283  </p></td>
<td class="confluenceTd"><p>  15,661  </p></td>
<td class="confluenceTd"><p> 17.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> id </p></td>
<td class="confluenceTd"><p>  215,824  </p></td>
<td class="confluenceTd"><p>  193,661  </p></td>
<td class="confluenceTd"><p> -10.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> is </p></td>
<td class="confluenceTd"><p>  14,480  </p></td>
<td class="confluenceTd"><p>  13,250  </p></td>
<td class="confluenceTd"><p> -8.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> it </p></td>
<td class="confluenceTd"><p>  45,985,473  </p></td>
<td class="confluenceTd"><p>  47,562,781  </p></td>
<td class="confluenceTd"><p> 3.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ja </p></td>
<td class="confluenceTd"><p>  45,187,665  </p></td>
<td class="confluenceTd"><p>  46,921,042  </p></td>
<td class="confluenceTd"><p> 3.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> km </p></td>
<td class="confluenceTd"><p>  5  </p></td>
<td class="confluenceTd"><p>  9  </p></td>
<td class="confluenceTd"><p> 80.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> kn </p></td>
<td class="confluenceTd"><p>  4,090  </p></td>
<td class="confluenceTd"><p>  4,285  </p></td>
<td class="confluenceTd"><p> 4.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ko </p></td>
<td class="confluenceTd"><p>  4,908,528  </p></td>
<td class="confluenceTd"><p>  4,990,836  </p></td>
<td class="confluenceTd"><p> 1.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> lt </p></td>
<td class="confluenceTd"><p>  5,766  </p></td>
<td class="confluenceTd"><p>  5,822  </p></td>
<td class="confluenceTd"><p> 1.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> lv </p></td>
<td class="confluenceTd"><p>  12,467  </p></td>
<td class="confluenceTd"><p>  10,453  </p></td>
<td class="confluenceTd"><p> -16.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mk </p></td>
<td class="confluenceTd"><p>  547  </p></td>
<td class="confluenceTd"><p>  1,400  </p></td>
<td class="confluenceTd"><p> 155.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ml </p></td>
<td class="confluenceTd"><p>  1,281  </p></td>
<td class="confluenceTd"><p>  1,280  </p></td>
<td class="confluenceTd"><p> -0.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mr </p></td>
<td class="confluenceTd"><p>  22,775  </p></td>
<td class="confluenceTd"><p>  23,452  </p></td>
<td class="confluenceTd"><p> 3.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ms </p></td>
<td class="confluenceTd"><p>  234,536  </p></td>
<td class="confluenceTd"><p>  286,100  </p></td>
<td class="confluenceTd"><p> 22.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mt </p></td>
<td class="confluenceTd"><p>  39,416  </p></td>
<td class="confluenceTd"><p>  29,780  </p></td>
<td class="confluenceTd"><p> -24.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ne </p></td>
<td class="confluenceTd"><p>  76  </p></td>
<td class="confluenceTd"><p>  234  </p></td>
<td class="confluenceTd"><p> 207.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> nl </p></td>
<td class="confluenceTd"><p>  563,761  </p></td>
<td class="confluenceTd"><p>  584,303  </p></td>
<td class="confluenceTd"><p> 3.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> no </p></td>
<td class="confluenceTd"><p>  55,053  </p></td>
<td class="confluenceTd"><p>  56,548  </p></td>
<td class="confluenceTd"><p> 2.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> oc </p></td>
<td class="confluenceTd"><p>  838  </p></td>
<td class="confluenceTd"><p>  5,017  </p></td>
<td class="confluenceTd"><p> 498.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pa </p></td>
<td class="confluenceTd"><p>  79  </p></td>
<td class="confluenceTd"><p>  107  </p></td>
<td class="confluenceTd"><p> 35.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pl </p></td>
<td class="confluenceTd"><p>  51,976  </p></td>
<td class="confluenceTd"><p>  55,890  </p></td>
<td class="confluenceTd"><p> 7.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pt </p></td>
<td class="confluenceTd"><p>  2,196,276  </p></td>
<td class="confluenceTd"><p>  2,395,862  </p></td>
<td class="confluenceTd"><p> 9.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ro </p></td>
<td class="confluenceTd"><p>  40,358  </p></td>
<td class="confluenceTd"><p>  32,007  </p></td>
<td class="confluenceTd"><p> -20.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ru </p></td>
<td class="confluenceTd"><p>  79,309,911  </p></td>
<td class="confluenceTd"><p>  81,574,518  </p></td>
<td class="confluenceTd"><p> 2.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sk </p></td>
<td class="confluenceTd"><p>  9,131  </p></td>
<td class="confluenceTd"><p>  7,760  </p></td>
<td class="confluenceTd"><p> -15.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sl </p></td>
<td class="confluenceTd"><p>  9,243  </p></td>
<td class="confluenceTd"><p>  13,665  </p></td>
<td class="confluenceTd"><p> 47.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> so </p></td>
<td class="confluenceTd"><p>  281,724  </p></td>
<td class="confluenceTd"><p>  350,402  </p></td>
<td class="confluenceTd"><p> 24.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sq </p></td>
<td class="confluenceTd"><p>  3,089  </p></td>
<td class="confluenceTd"><p>  5,997  </p></td>
<td class="confluenceTd"><p> 94.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sr </p></td>
<td class="confluenceTd"><p>  690  </p></td>
<td class="confluenceTd"><p>  707  </p></td>
<td class="confluenceTd"><p> 2.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sv </p></td>
<td class="confluenceTd"><p>  56,956  </p></td>
<td class="confluenceTd"><p>  69,112  </p></td>
<td class="confluenceTd"><p> 21.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sw </p></td>
<td class="confluenceTd"><p>  1,180  </p></td>
<td class="confluenceTd"><p>  1,003  </p></td>
<td class="confluenceTd"><p> -15.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ta </p></td>
<td class="confluenceTd"><p>  1,308  </p></td>
<td class="confluenceTd"><p>  1,303  </p></td>
<td class="confluenceTd"><p> -0.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> te </p></td>
<td class="confluenceTd"><p>  3,360  </p></td>
<td class="confluenceTd"><p>  5,824  </p></td>
<td class="confluenceTd"><p> 73.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> th </p></td>
<td class="confluenceTd"><p>  5,673  </p></td>
<td class="confluenceTd"><p>  8,675  </p></td>
<td class="confluenceTd"><p> 52.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tl </p></td>
<td class="confluenceTd"><p>  1,277  </p></td>
<td class="confluenceTd"><p>  2,987  </p></td>
<td class="confluenceTd"><p> 133.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tr </p></td>
<td class="confluenceTd"><p>  878,127  </p></td>
<td class="confluenceTd"><p>  917,616  </p></td>
<td class="confluenceTd"><p> 4.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> uk </p></td>
<td class="confluenceTd"><p>  3,977  </p></td>
<td class="confluenceTd"><p>  5,910  </p></td>
<td class="confluenceTd"><p> 48.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ur </p></td>
<td class="confluenceTd"><p>  29,711  </p></td>
<td class="confluenceTd"><p>  9,575  </p></td>
<td class="confluenceTd"><p> -67.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> vi </p></td>
<td class="confluenceTd"><p>  2,310,556  </p></td>
<td class="confluenceTd"><p>  2,455,051  </p></td>
<td class="confluenceTd"><p> 6.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> yi </p></td>
<td class="confluenceTd"><p>  28  </p></td>
<td class="confluenceTd"><p>  32  </p></td>
<td class="confluenceTd"><p> 14.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> zh-cn </p></td>
<td class="confluenceTd"><p>  16,938,972  </p></td>
<td class="confluenceTd"><p>  18,231,035  </p></td>
<td class="confluenceTd"><p> 7.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> zh-tw </p></td>
<td class="confluenceTd"><p>  703,272  </p></td>
<td class="confluenceTd"><p>  646,268  </p></td>
<td class="confluenceTd"><p> -8.1% </p></td>
</tr>
</tbody></table></div>



<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>When we require that both extracts for a given file have the same language id, we see some different patterns [SQL4].</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p>Language Id</p></td>
<td class="confluenceTd"><p> pdftotext </p></td>
<td class="confluenceTd"><p> Tika/PDFBox </p></td>
<td class="confluenceTd"><p>% Change</p></td>
</tr>
<tr>
<td class="confluenceTd"><p> af </p></td>
<td class="confluenceTd"><p>  10,274  </p></td>
<td class="confluenceTd"><p>  10,330  </p></td>
<td class="confluenceTd"><p> 0.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> an </p></td>
<td class="confluenceTd"><p>  68,416  </p></td>
<td class="confluenceTd"><p>  63,324  </p></td>
<td class="confluenceTd"><p> -7.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ar </p></td>
<td class="confluenceTd"><p>  2,021,212  </p></td>
<td class="confluenceTd"><p>  1,652,127  </p></td>
<td class="confluenceTd"><p> -18.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ast </p></td>
<td class="confluenceTd"><p>  9,931  </p></td>
<td class="confluenceTd"><p>  10,009  </p></td>
<td class="confluenceTd"><p> 0.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> be </p></td>
<td class="confluenceTd"><p>  33  </p></td>
<td class="confluenceTd"><p>  34  </p></td>
<td class="confluenceTd"><p> 3.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> bg </p></td>
<td class="confluenceTd"><p>  20,522  </p></td>
<td class="confluenceTd"><p>  20,549  </p></td>
<td class="confluenceTd"><p> 0.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> bn </p></td>
<td class="confluenceTd"><p>  4,556  </p></td>
<td class="confluenceTd"><p>  4,754  </p></td>
<td class="confluenceTd"><p> 4.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> br </p></td>
<td class="confluenceTd"><p>  7,207  </p></td>
<td class="confluenceTd"><p>  7,340  </p></td>
<td class="confluenceTd"><p> 1.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ca </p></td>
<td class="confluenceTd"><p>  242,815  </p></td>
<td class="confluenceTd"><p>  246,346  </p></td>
<td class="confluenceTd"><p> 1.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> cs </p></td>
<td class="confluenceTd"><p>  24,872  </p></td>
<td class="confluenceTd"><p>  25,297  </p></td>
<td class="confluenceTd"><p> 1.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> cy </p></td>
<td class="confluenceTd"><p>  51,644  </p></td>
<td class="confluenceTd"><p>  51,330  </p></td>
<td class="confluenceTd"><p> -0.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> da </p></td>
<td class="confluenceTd"><p>  22,737  </p></td>
<td class="confluenceTd"><p>  23,412  </p></td>
<td class="confluenceTd"><p> 3.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> de </p></td>
<td class="confluenceTd"><p>  29,478,164  </p></td>
<td class="confluenceTd"><p>  29,814,286  </p></td>
<td class="confluenceTd"><p> 1.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> el </p></td>
<td class="confluenceTd"><p>  9,427,793  </p></td>
<td class="confluenceTd"><p>  9,371,790  </p></td>
<td class="confluenceTd"><p> -0.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> en </p></td>
<td class="confluenceTd"><p>  243,539,028  </p></td>
<td class="confluenceTd"><p>  244,571,204  </p></td>
<td class="confluenceTd"><p> 0.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> es </p></td>
<td class="confluenceTd"><p>  38,876,299  </p></td>
<td class="confluenceTd"><p>  38,835,666  </p></td>
<td class="confluenceTd"><p> -0.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> et </p></td>
<td class="confluenceTd"><p>  16,080  </p></td>
<td class="confluenceTd"><p>  16,516  </p></td>
<td class="confluenceTd"><p> 2.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> eu </p></td>
<td class="confluenceTd"><p>  11,018  </p></td>
<td class="confluenceTd"><p>  11,127  </p></td>
<td class="confluenceTd"><p> 1.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fa </p></td>
<td class="confluenceTd"><p>  19,278,448  </p></td>
<td class="confluenceTd"><p>  17,596,803  </p></td>
<td class="confluenceTd"><p> -8.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fi </p></td>
<td class="confluenceTd"><p>  9,767  </p></td>
<td class="confluenceTd"><p>  9,913  </p></td>
<td class="confluenceTd"><p> 1.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> fr </p></td>
<td class="confluenceTd"><p>  61,593,227  </p></td>
<td class="confluenceTd"><p>  62,039,806  </p></td>
<td class="confluenceTd"><p> 0.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ga </p></td>
<td class="confluenceTd"><p>  22,256  </p></td>
<td class="confluenceTd"><p>  22,131  </p></td>
<td class="confluenceTd"><p> -0.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> gl </p></td>
<td class="confluenceTd"><p>  174,194  </p></td>
<td class="confluenceTd"><p>  166,007  </p></td>
<td class="confluenceTd"><p> -4.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> gu </p></td>
<td class="confluenceTd"><p>  3,456  </p></td>
<td class="confluenceTd"><p>  3,633  </p></td>
<td class="confluenceTd"><p> 5.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> he </p></td>
<td class="confluenceTd"><p>  3,378,638  </p></td>
<td class="confluenceTd"><p>  3,206,568  </p></td>
<td class="confluenceTd"><p> -5.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hi </p></td>
<td class="confluenceTd"><p>  265,152  </p></td>
<td class="confluenceTd"><p>  242,522  </p></td>
<td class="confluenceTd"><p> -8.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hr </p></td>
<td class="confluenceTd"><p>  30,124  </p></td>
<td class="confluenceTd"><p>  30,354  </p></td>
<td class="confluenceTd"><p> 0.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ht </p></td>
<td class="confluenceTd"><p>  2,798  </p></td>
<td class="confluenceTd"><p>  2,869  </p></td>
<td class="confluenceTd"><p> 2.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> hu </p></td>
<td class="confluenceTd"><p>  13,260  </p></td>
<td class="confluenceTd"><p>  13,595  </p></td>
<td class="confluenceTd"><p> 2.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> id </p></td>
<td class="confluenceTd"><p>  190,295  </p></td>
<td class="confluenceTd"><p>  190,072  </p></td>
<td class="confluenceTd"><p> -0.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> is </p></td>
<td class="confluenceTd"><p>  10,718  </p></td>
<td class="confluenceTd"><p>  10,777  </p></td>
<td class="confluenceTd"><p> 0.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> it </p></td>
<td class="confluenceTd"><p>  45,675,112  </p></td>
<td class="confluenceTd"><p>  45,575,218  </p></td>
<td class="confluenceTd"><p> -0.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ja </p></td>
<td class="confluenceTd"><p>  45,046,240  </p></td>
<td class="confluenceTd"><p>  45,903,641  </p></td>
<td class="confluenceTd"><p> 1.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> km </p></td>
<td class="confluenceTd"><p>  5  </p></td>
<td class="confluenceTd"><p>  9  </p></td>
<td class="confluenceTd"><p> 80.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> kn </p></td>
<td class="confluenceTd"><p>  3,938  </p></td>
<td class="confluenceTd"><p>  3,950  </p></td>
<td class="confluenceTd"><p> 0.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ko </p></td>
<td class="confluenceTd"><p>  4,864,390  </p></td>
<td class="confluenceTd"><p>  4,914,251  </p></td>
<td class="confluenceTd"><p> 1.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> lt </p></td>
<td class="confluenceTd"><p>  5,587  </p></td>
<td class="confluenceTd"><p>  5,684  </p></td>
<td class="confluenceTd"><p> 1.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> lv </p></td>
<td class="confluenceTd"><p>  10,786  </p></td>
<td class="confluenceTd"><p>  10,435  </p></td>
<td class="confluenceTd"><p> -3.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mk </p></td>
<td class="confluenceTd"><p>  545  </p></td>
<td class="confluenceTd"><p>  1,398  </p></td>
<td class="confluenceTd"><p> 156.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ml </p></td>
<td class="confluenceTd"><p>  1,281  </p></td>
<td class="confluenceTd"><p>  1,280  </p></td>
<td class="confluenceTd"><p> -0.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mr </p></td>
<td class="confluenceTd"><p>  22,695  </p></td>
<td class="confluenceTd"><p>  22,523  </p></td>
<td class="confluenceTd"><p> -0.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ms </p></td>
<td class="confluenceTd"><p>  221,213  </p></td>
<td class="confluenceTd"><p>  226,932  </p></td>
<td class="confluenceTd"><p> 2.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> mt </p></td>
<td class="confluenceTd"><p>  18,253  </p></td>
<td class="confluenceTd"><p>  18,777  </p></td>
<td class="confluenceTd"><p> 2.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ne </p></td>
<td class="confluenceTd"><p>  73  </p></td>
<td class="confluenceTd"><p>  83  </p></td>
<td class="confluenceTd"><p> 13.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> nl </p></td>
<td class="confluenceTd"><p>  548,538  </p></td>
<td class="confluenceTd"><p>  552,625  </p></td>
<td class="confluenceTd"><p> 0.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> no </p></td>
<td class="confluenceTd"><p>  41,588  </p></td>
<td class="confluenceTd"><p>  42,482  </p></td>
<td class="confluenceTd"><p> 2.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> oc </p></td>
<td class="confluenceTd"><p>  605  </p></td>
<td class="confluenceTd"><p>  609  </p></td>
<td class="confluenceTd"><p> 0.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pa </p></td>
<td class="confluenceTd"><p>  79  </p></td>
<td class="confluenceTd"><p>  107  </p></td>
<td class="confluenceTd"><p> 35.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pl </p></td>
<td class="confluenceTd"><p>  50,848  </p></td>
<td class="confluenceTd"><p>  51,776  </p></td>
<td class="confluenceTd"><p> 1.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> pt </p></td>
<td class="confluenceTd"><p>  2,090,127  </p></td>
<td class="confluenceTd"><p>  2,144,491  </p></td>
<td class="confluenceTd"><p> 2.6% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ro </p></td>
<td class="confluenceTd"><p>  30,282  </p></td>
<td class="confluenceTd"><p>  30,889  </p></td>
<td class="confluenceTd"><p> 2.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ru </p></td>
<td class="confluenceTd"><p>  79,195,319  </p></td>
<td class="confluenceTd"><p>  78,271,782  </p></td>
<td class="confluenceTd"><p> -1.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sk </p></td>
<td class="confluenceTd"><p>  8,745  </p></td>
<td class="confluenceTd"><p>  6,776  </p></td>
<td class="confluenceTd"><p> -22.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sl </p></td>
<td class="confluenceTd"><p>  8,290  </p></td>
<td class="confluenceTd"><p>  8,519  </p></td>
<td class="confluenceTd"><p> 2.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> so </p></td>
<td class="confluenceTd"><p>  224,340  </p></td>
<td class="confluenceTd"><p>  212,438  </p></td>
<td class="confluenceTd"><p> -5.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sq </p></td>
<td class="confluenceTd"><p>  2,882  </p></td>
<td class="confluenceTd"><p>  4,269  </p></td>
<td class="confluenceTd"><p> 48.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sr </p></td>
<td class="confluenceTd"><p>  689  </p></td>
<td class="confluenceTd"><p>  703  </p></td>
<td class="confluenceTd"><p> 2.0% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sv </p></td>
<td class="confluenceTd"><p>  40,347  </p></td>
<td class="confluenceTd"><p>  41,313  </p></td>
<td class="confluenceTd"><p> 2.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> sw </p></td>
<td class="confluenceTd"><p>  959  </p></td>
<td class="confluenceTd"><p>  951  </p></td>
<td class="confluenceTd"><p> -0.8% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ta </p></td>
<td class="confluenceTd"><p>  1,308  </p></td>
<td class="confluenceTd"><p>  1,303  </p></td>
<td class="confluenceTd"><p> -0.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> te </p></td>
<td class="confluenceTd"><p>  3,360  </p></td>
<td class="confluenceTd"><p>  3,407  </p></td>
<td class="confluenceTd"><p> 1.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> th </p></td>
<td class="confluenceTd"><p>  5,078  </p></td>
<td class="confluenceTd"><p>  5,088  </p></td>
<td class="confluenceTd"><p> 0.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tl </p></td>
<td class="confluenceTd"><p>  1,175  </p></td>
<td class="confluenceTd"><p>  1,207  </p></td>
<td class="confluenceTd"><p> 2.7% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tr </p></td>
<td class="confluenceTd"><p>  865,494  </p></td>
<td class="confluenceTd"><p>  878,297  </p></td>
<td class="confluenceTd"><p> 1.5% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> uk </p></td>
<td class="confluenceTd"><p>  3,898  </p></td>
<td class="confluenceTd"><p>  5,153  </p></td>
<td class="confluenceTd"><p> 32.2% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> ur </p></td>
<td class="confluenceTd"><p>  21,459  </p></td>
<td class="confluenceTd"><p>  5,553  </p></td>
<td class="confluenceTd"><p> -74.1% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> vi </p></td>
<td class="confluenceTd"><p>  2,254,738  </p></td>
<td class="confluenceTd"><p>  2,264,384  </p></td>
<td class="confluenceTd"><p> 0.4% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> yi </p></td>
<td class="confluenceTd"><p>  28  </p></td>
<td class="confluenceTd"><p>  32  </p></td>
<td class="confluenceTd"><p> 14.3% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> zh-cn </p></td>
<td class="confluenceTd"><p>  16,608,321  </p></td>
<td class="confluenceTd"><p>  17,263,436  </p></td>
<td class="confluenceTd"><p> 3.9% </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> zh-tw </p></td>
<td class="confluenceTd"><p>  347,067  </p></td>
<td class="confluenceTd"><p>  349,029  </p></td>
<td class="confluenceTd"><p> 0.6% </p></td>
</tr>
</tbody></table></div>


<p>Further evaluation and analysis are required, but we should look into:</p>

<ol>
	<li>Why there are so many &quot;common words&quot; for <em>bn</em> in the first common tokens by language table? 2. Are there systematic areas for improvements in PDFBox for <em>hi</em> (-8.5%), <em>he</em> (-5.1%) and Arabic script languages: <em>ar</em> (-18%), <em>fa</em> (-9%), <em>ur</em> (-74%)?
<br class="atl-forced-newline"/>
<br class="atl-forced-newline"/></li>
</ol>


<p>Most importantly, we need to determine if any of the above areas for inquiry are based on faults in tika-eval that should be fixed.</p>

<h1 id="ComparisonTikaAndPDFToText201811-FollowupAnalysis">Follow up Analysis</h1>

<h2 id="ComparisonTikaAndPDFToText201811-1.Whytherearesomany&quot;commonwords&quot;forbninthefirstcommontokensbylanguagetable?">1. Why there are so many &quot;common words&quot; for <em>bn</em> in the first common tokens by language table?</h2>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>I ran [SQL5], and I manually reviewed results.  I observed the following points:</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<ol>
	<li>There was only one out of the 100 documents that had what looked like Bangla words in the top 10 most common words for those documents.   2. My intuition from previous experience with Optimaize, and it was confirmed in looking at the top 10 words for these documents is that Optimaize prefers <em>bn</em> when there are many numerals and very little other language content.   3. As in previous work with Optimaize, I was struck that the confidence levels are typically very high (~0.999) even when there is very little content.  For example, <em>commoncrawl3/7A/7AZUB5NHLJN3TBCMEP2YRSRK6DDNBP5F</em> is mostly comprised of the UTF-8 replacement character, &quot;EF BF BD&quot; (equivalent to U+FFFD) (~13,000 of these); there are a few new lines, a few tabs, a few numerals, and the word 'untitled', and yet Optimaize's confidence is <em>0.9999907612800598</em> that this is Bangla.   4. The current OOV% metric does not take calculate a confidence.  If there's just one alphanumeric term and it happens to be in the dictionary, then the OOV% is 0%, which is less than entirely useful.  It would be better to improve our &quot;language-y&quot; score or its inverse, the &quot;junk&quot; score (see <a class="external-link" href="https://issues.apache.org/jira/browse/TIKA-1443" rel="nofollow">TIKA-1443</a>), to include a confidence interval based on the amount of input.  5. When tika-eval doesn't have a &quot;common words&quot; list for a language, e.g., <em>bn</em>, it backs-off and uses the English list.  Given that the internet is overwhelmingly English and given that the <em>commoncrawl3</em> regression corpus contains quite a bit of English, and given that content from the title metadata field slipped into the extracted text for the PDFBox/Tika extracts, this backing-off to English can lead to misleading results.
<br class="atl-forced-newline"/></li>
</ol>


<p>My conclusion is that most of the documents that received a language id of <em>bn</em> actually contain a high percentage of junk.</p>

<p>Recommendations:</p>
<ol>
	<li>We should experiment with other language detectors and evaluate them for the traditional language-id performance measures: accuracy and speed on known language content.  However, we should also evaluate them on how well they handle various types of degraded text to confirm that the confidence scores are related to the noise – content that contains 98% junk text should not receive a language id confidence of 99.999%. 2. We should augment our &quot;common words&quot; lists to cover all languages identified by whichever language detector we choose.  We should not back-off to the English list for &quot;common words&quot;. 3. We should continue to work on/develop a junk metric that is more nuanced than the simple sum of &quot;Common Tokens&quot; and the OOV%.  The metrics should take the following into account:
	<ol>
		<li>Amount of evidence. 2. Alignment of distribution of token lengths relative to the &quot;id'd&quot; language (this will be useless with CJK, which are simply bigrammed by tika-eval; but it might be very useful for most other languages). 3. Amount of symbols and U+FFFD characters vs. the alphabetic tokens. 4. Instead of binary OOV%, it might be useful to calculate alignment to a Zipf distribution or simply similarity to a language model – we'd need to include % of words in the common words file. 5. Incorrect duplication of text. For file, <em>commoncrawl3/2E/2EXCWC7T6P5ZY6DINFI3X2UQNIMAISKT</em>, tika-eval shows an increase in Common Tokens of 50,372 tokens if switching from pdftotext to PDFBox/Tika.  However, this file has an absurd amount of duplicate text in the headers – 17,000 occurrences of &quot;training&quot; in the PDFBox/Tika extract, and only 230 in the pdftotext extract. PDFBox/Tika correctly suppresses these duplicate text portions if <em>setSuppressDuplicateOverlappingText</em> is set to <em>true</em>, but Tika's default is not to suppress duplicate text.  One consideration is that for this file, the % of OOV is 39% in pdftotext but only 8% in the text extracted by PDFBox/Tika.  This suggests that it might be better, instead of simply summing the common tokens, to sum them only in files which have an OOV% which is within the norm (say, one stddev).  As a side note, 40% is fairly common for OOV for English documents – the median is 45%, and the stddev is 14%.
<br class="atl-forced-newline"/></li>
	</ol>
	</li>
</ol>


<h2 id="ComparisonTikaAndPDFToText201811-2.AretheresystematicareasforimprovementsinPDFBoxforhi(-8.5%),he(-5.1%)andArabicscriptlanguages:ar(-18%),fa(-8%),ur(-74%)?">2. Are there systematic areas for improvements in PDFBox for <em>hi</em> (-8.5%), <em>he</em> (-5.1%) and Arabic script languages: <em>ar</em> (-18%), <em>fa</em> (-8%), <em>ur</em> (-74%)?</h2>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>I don't know these languages, but I ran [SQL7] and then put the contents of <em>TOP_10_UNIQUE_TOKEN_DIFFS_A</em> and <em>TOP_10_UNIQUE_TOKEN_DIFFS_B</em> through Google translate.  For example, for the top 10 unique words in <em>commoncrawl3_refetched/XH/XHYIWIBT5QPY64UYUPLXZXAYC2I5JPZS</em>:</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ميں: 532 | ہے: 520 | كے: 450 | ہيں: 370 | كہ: 365 | كو: 343 | سے: 342 | كا: 297 | ہم: 280 | جناب: 254
</pre>
</div></div> 

<p>are translated as:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>I: 532 | Is: 520 | Of: 450 | Are: 370 | Yes: 365 | Who: 343 | From: 342 | : 297 | We: 280 | Mr.: 254
</pre>
</div></div>

<p>Whereas PDFBox/Tika's unique tokens</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ںيم: 564 | ےہ: 537 | ےك: 468 | ںيہ: 386 | ہك: 365 | وك: 360 | ےس: 348 | اك: 306 | مہ: 281 | انجب: 250
</pre>
</div></div>

<p>are translated as:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>Th: 564 | Yes: 537 | S: 468 | Yes: 386 | Hak: 365 | Ki: 360 | S: 348 | A: 306 | Mah: 281 | Ingredients: 250
</pre>
</div></div>

<p>Overall, this method wasn't able to yield satisfactory insight about general patterns.  In some cases, the individual terms looked better in one tool or the other and <em>vice versa</em>.</p>

<p>I did note that there were more cases in PDFBox's extracted text of numerals concatenated with words as in <em>commoncrawl3/JG/JGE6WTYI5SEI3Z4JUULIPSSRTNL3VMIG:</em></p>

<p><em>TOP_10_UNIQUE_TOKEN_DIFFS_A</em></p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>	1: 167 | رياضي: 167 | 9: 44 | 8: 38 | 7: 28 | 6: 16 | 5: 9 | 4: 6 | 3: 2 | 9622243 
</pre>
</div></div>

<p><em>TOP_10_UNIQUE_TOKEN_DIFFS_B</em> </p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>        رياضي: 44 | 8رياضي: 38 | 7رياضي: 28 | 10رياضي: 24 | 6رياضي: 16 | 5رياضي: 9 | 4رياضي: 6 | 3رياضي: 2 | 96222431: 1 
</pre>
</div></div>

<h1 id="ComparisonTikaAndPDFToText201811-Post-StudyReflection/AreasforImprovements">Post-Study Reflection/Areas for Improvements</h1>

<h2 id="ComparisonTikaAndPDFToText201811-Overallimprovementstothisprocess">Overall improvements to this process</h2>
<ul>
	<li>The wrapper around pdftotext should have &quot;caught&quot; the exception written to stderr and stored that as we do with exceptions from Tika.</li>
	<li>Tika currently includes the file's 'title' metadata in the content of the file.  This gives the misleading impression that some content was extracted from the file when, in fact, only the title was extracted from the XMP or metadata.  Next time, we should use a content handler that only includes the extracted text.</li>
	<li>Next time we run this evaluation, we should specify <em>-cfg</em> from the commandline and/or figure out why our <em>pdfrc</em> file wasn't being read where we placed it.
<br class="atl-forced-newline"/></li>
</ul>


<h2 id="ComparisonTikaAndPDFToText201811-Improvementstotika-eval">Improvements to tika-eval</h2>
<ul>
	<li>We observed a handful of cases where the number of &quot;common words&quot; increased, but the content extracted was probably worse between two tools.  This happened when one tool added spaces incorrectly, but the sub-words were actual words within the language.  See, for example: <em>commoncrawl3/TF/TFNFGXL27M77Q6X42ECYWJNSJ32WES74</em> (Russian) and <em>commoncrawl3/FS/FSEHYPPOEV6EUYND5BRP3BBNAI5FVPYP</em> (German) (&quot;fachgruppe&quot; vs &quot;fach gruppe&quot; and &quot;ermoglicht&quot; and &quot;ermog&quot; &quot;licht&quot;)</li>
	<li>If there's an &quot;extract exception&quot;, meaning an empty file or an incomplete json file, we include that information in the containers table, but we don't include a row for that file in the profiles table.  This causes some of the SQL that ships with tika-eval to result in not-quite-fair comparisons; some of the SQL that takes into account &quot;runtime exceptions&quot; fails to take into account &quot;extract exceptions.&quot;</li>
	<li>See the point above about improving the &quot;junk&quot; metric.
<br class="atl-forced-newline"/></li>
</ul>


<h1 id="ComparisonTikaAndPDFToText201811-SQL">SQL</h1>
<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL1]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select sum(cb.num_common_tokens) from contents_b cb
join profiles_b pb on pb.id=cb.id
left join profiles_a pa on pb.id=pa.id
left join contents_a ca on pa.id=ca.id
where pa.is_embedded = false and pb.is_embedded=false
and (ca.lang_id_1 = cb.lang_id_1
or ca.lang_id_1 is null)
</pre>
</div></div>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL2]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select sum(ca.num_common_tokens) from contents_a ca
join profiles_a pa on pa.id=ca.id
left join profiles_b pb on pa.id=pb.id
left join contents_b cb on pb.id=cb.id
where pa.is_embedded = false and pb.is_embedded=false
and (cb.lang_id_1 = ca.lang_id_1
or cb.lang_id_1 is null)
</pre>
</div></div>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL3]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select lang_id_1, sum(num_common_tokens) as total_common_tokens
from contents_b
group by lang_id_1
order by lang_id_1
</pre>
</div></div>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL4]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select ca.lang_id_1, sum(ca.num_common_tokens)
from contents_a ca
join contents_b  cb on ca.id=cb.id
where ca.lang_id_1=cb.lang_id_1
group by ca.lang_id_1
order by ca.lang_id_1
</pre>
</div></div>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL5]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select ca.lang_id_1, ca.top_n_tokens, cb.top_n_tokens from contents_b cb
join contents_a ca on cb.id=ca.id
where cb.lang_id_1 = &#39;bn&#39;
order by rand()
limit 100;
</pre>
</div></div>

<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL6]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select  ca.id, file_path, 
1-(cast(ca.num_common_tokens as float) / cast(ca.num_alphabetic_tokens as float)) as OOV_A,
ca.num_alphabetic_tokens,
1-(cast(cb.num_common_tokens as float) / cast(cb.num_alphabetic_tokens as float)) as OOV_B,
cb.num_alphabetic_tokens,
ca.lang_id_1, ca.lang_id_prob_1,
cb.lang_id_1, cb.lang_id_prob_1,
ca.top_n_tokens, cb.top_n_tokens 
from contents_b cb
join contents_a ca on cb.id=ca.id
join profiles_a pa on ca.id=pa.id
join containers c on pa.container_id=c.container_id
where cb.lang_id_1 = &#39;bn&#39; and
ca.num_alphabetic_tokens &gt; 0
and cb.num_alphabetic_tokens &gt; 0
order by OOV_B asc
limit 100;
</pre>
</div></div>
<p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p><p>[SQL7]</p></p><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p /><p />
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>select file_path, ca.top_n_tokens, cb.top_n_tokens,
(cb.num_common_tokens-ca.num_common_tokens) as delta_common_tokens,
top_10_unique_token_diffs_a, top_10_unique_token_diffs_b
from contents_a ca 
join contents_b cb on ca.id=cb.id
join content_comparisons cc on cc.id=ca.id
join profiles_a pa on ca.id=pa.id
join containers cc on pa.container_id=cc.container_id
where ca.lang_id_1=&#39;ur&#39;
and cb.lang_id_1=&#39;ur&#39;
order by delta_common_tokens asc
</pre>
</div></div>

<h1 id="ComparisonTikaAndPDFToText201811-Howtomakesenseofthetika-evalreports">How to make sense of the tika-eval reports</h1>
<p>Exceptions aside, the critical file is <em>content/content_diffs_with_exceptions.xlsx</em>.  This shows differences in the content that was extracted.  Column <em>TOP_10_UNIQUE_TOKEN_DIFFS_A</em> records the top 10 most frequent tokens that appear only in &quot;A&quot; extracts (pdftotext); <em>TOP_10_UNIQUE_TOKEN_DIFFS_B</em> records the top 10 most frequent tokens that appear only in &quot;B&quot; extracts (Tika/PDFBox); <em>NUM_COMMON_TOKENS_DIFF_IN_B</em> records whether there has been an increase (positive number) or a decrease in &quot;common tokens&quot; if one were to move from &quot;A&quot; to &quot;B&quot; as the extraction tool.</p>

<p>For example, for file <em>commoncrawl3_refetched/7L/7L6BDSEYCY3QVVPM7YYK3FVCK2ZLOSA7</em>, <em>NUM_COMMON_TOKENS_DIFF_IN_B</em> has a value of '38', which suggests that there are 38 more &quot;common words&quot; in the text extracted by Tika/PDFBox than by pdftotext.</p>

<p><em>TOP_10_UNIQUE_TOKEN_DIFFS_A</em> has </p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>bklasse: 2 | gehoben: 2 | jahressiegers: 2 | untersagt: 2 | verlasslichkeit: 2 | 3321: 1 | 50jahrigen: 1 | 5282708: 1 | 60jahriges: 1 | 970843: 1
</pre>
</div></div>

<p><em>TOP_10_UNIQUE_TOKEN_DIFFS_B</em> has </p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>e: 23 | gen: 9 | be: 6 | te: 6 | schaft: 5 | gung: 4 | nant: 4 | nen: 4 | o: 4 | ten: 4
</pre>
</div></div>

<p>This probably means that some words were incorrectly split by PDFBox (&quot;tool B&quot;); and it may mean that a hyphen was incorrectly dropped in a few words by pdftotext (&quot;tool A&quot;): &quot;bklasse&quot;, &quot;50jahrigen&quot; and &quot;60jahriges&quot;, which should probably be &quot;b-klasse&quot;, &quot;50-jahrigen&quot; and &quot;60-jahriges&quot;</p>
                    </div>

                                        
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on мая 02, 2023 15:13</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
